<div class="container">
  <div class="header">
    <h2>Governorates</h2>
    <button class="btn-add" [routerLink]="['add']">Add New Governorate</button>
  </div>

  <div class="search-container">
    <input
      type="text"
      placeholder="Search governorates..."
      [(ngModel)]="searchTerm"
      (keyup.enter)="onSearch()"
    />
    <button (click)="onSearch()">Search</button>

    <div class="sort-container">
      <label>Sort by:</label>
      <select [(ngModel)]="sortOption" (change)="onSort(sortOption)">
        <option value="">Default</option>
        <option value="nameAsc">Name (A-Z)</option>
        <option value="nameDesc">Name (Z-A)</option>
      </select>
    </div>
  </div>

  <div *ngIf="loading" class="loading">Loading...</div>

  <table *ngIf="!loading && governorates.data.length > 0">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let governorate of governorates.data">
        <td>{{ governorate.id }}</td>
        <td>{{ governorate.name }}</td>
        <td class="actions">
          <button
            class="btn-delete"
            (click)="deleteGovernorate(governorate.id!)"
          >
            Delete
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="!loading && governorates.data.length == 0" class="no-data">
    No governorates found.
  </div>

  <div class="pagination" *ngIf="totalCount > pageSize">
    <button [disabled]="pageIndex === 1" (click)="onPageChange(pageIndex - 1)">
      Previous
    </button>

    <span
      >Page {{ pageIndex }} of
      {{ totalCount ? Math.ceil(totalCount / pageSize) : 1 }}</span
    >

    <button
      [disabled]="pageIndex >= Math.ceil(totalCount / pageSize)"
      (click)="onPageChange(pageIndex + 1)"
    >
      Next
    </button>
  </div>
</div>
