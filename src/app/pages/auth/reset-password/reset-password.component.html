<div class="auth-container">
  <div class="auth-card">
    <div class="auth-left">
      <div class="logo-container">
        <img src="Logo2.png" alt="Logo" class="logo" />
        <span class="logo-text">hipping Management System</span>
      </div>

      <div class="welcome-content">
        <h1 class="welcome-text">Reset Password</h1>
        <p class="welcome-description">Create a new secure password for your account.</p>
      </div>

      <div class="illustration-container">
        <img src="date.jpg" alt="Shipping Illustration" class="illustration" />
      </div>
    </div>

    <div class="auth-right">
      <h2 class="auth-title">Reset Password</h2>

      <!-- <div class="auth-subtitle">
        <span>Remember your password?</span>
        <a routerLink="/auth/login" class="auth-link">Back to login</a>
      </div> -->
      <p class="auth-description">Create a new password for your account.</p>

      <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()" class="auth-form">
        <div class="form-group">
          <div class="input-container">
            <input
              type="password"
              id="password"
              formControlName="password"
              class="form-control"
              placeholder="New password"
              [class.is-invalid]="resetPasswordForm.get('password')?.invalid && resetPasswordForm.get('password')?.touched"
            >
            <i class="bi bi-lock input-icon"></i>
          </div>
          @if (resetPasswordForm.get('password')?.invalid && resetPasswordForm.get('password')?.touched) {
            <div class="invalid-feedback">
              @if (resetPasswordForm.get('password')?.errors?.['required']) {
                Password is required
              } @else if (resetPasswordForm.get('password')?.errors?.['minlength']) {
                Password must be at least 8 characters
              }
            </div>
          }
        </div>

        <div class="form-group">
          <div class="input-container">
            <input
              type="password"
              id="confirmPassword"
              formControlName="confirmPassword"
              class="form-control"
              placeholder="Confirm new password"
              [class.is-invalid]="resetPasswordForm.get('confirmPassword')?.invalid && resetPasswordForm.get('confirmPassword')?.touched"
            >
            <i class="bi bi-shield-lock input-icon"></i>
          </div>
          @if (resetPasswordForm.get('confirmPassword')?.invalid && resetPasswordForm.get('confirmPassword')?.touched) {
            <div class="invalid-feedback">
              @if (resetPasswordForm.get('confirmPassword')?.errors?.['required']) {
                Please confirm your password
              } @else if (resetPasswordForm.get('confirmPassword')?.errors?.['passwordMismatch']) {
                Passwords do not match
              }
            </div>
          }
        </div>

        <!-- <div class="password-requirements">
          <p class="requirements-title">Password must contain:</p>
          <ul class="requirements-list">
            <li>At least 8 characters</li>
            <li>At least one uppercase letter</li>
            <li>At least one number</li>
            <li>At least one special character</li>
          </ul>
        </div> -->

        @if (errorMessage) {
          <div class="alert alert-danger">{{ errorMessage }}</div>
        }

        @if (successMessage) {
          <div class="alert alert-success">{{ successMessage }}</div>
        }

        <button
          type="submit"
          class="btn btn-primary btn-block"
          [disabled]="resetPasswordForm.invalid || isLoading || !token"
        >
          @if (isLoading) {
            <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
            Resetting...
          } @else {
            Reset Password
          }
        </button>
      </form>
    </div>
  </div>
</div>
